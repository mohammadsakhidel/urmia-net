function DeletePageSuccess(data) {
    if (data.Done) {
        $('#page_' + data.PageId).remove();
    }
    else {
        show_errors(data.Errors);
    }
}

function EditPageSuccess(data) {
    if (data.Done) {
        var frm = $('#frm_page_editor');
        frm.find('input[name="PageId"]').val(data.PageId);
        frm.find('input[name="PageName"]').val(data.Name);
        for (var i = 0; i < data.Contents.length; i++) {
            $('input[name="Title_' + data.Contents[i][0] + '"]').val(data.Contents[i][1]);
            tinyMCE.get('page_editor_' + data.Contents[i][0]).setContent(data.Contents[i][2]);
        }
        frm.find('input[name="PageName"]').attr('disabled', 'disabled');
    }
    else {
        show_errors(data.Errors);
    }
}

function SendPageSuccess(data) {
    if (data.Done) {
        $('#msg_page_editor').removeClass('error_message').addClass('success_message').html(data.Message).show();
        clear_page_editor();
    }
    else {
        show_errors(data.Errors);
    }
}

function clear_page_editor() {
    var frm = $('#frm_page_editor');
    frm.find('input[name="PageId"]').val('');
    frm.find('input[name="PageName"]').val('');
    frm.find('input[name="PageName"]').removeAttr('disabled');
    frm.find('input[name="Title"]').val('');
    $('div.page_editor_con').each(function () {
        tinyMCE.get($(this).find('.page_editor').attr('id')).setContent('');
        $('input[name^="Title"]').val('');
    });
}

function show_errors(errors) {
    var errorMessage = "";
    errorMessage += "<ul>";
    for (var i = 0; i < errors.length; i++) {
        errorMessage += "<li>" + errors[i] + "</li>";
    }
    errorMessage += "</ul>";
    $('#msg_page_editor').removeClass('success_message').addClass('error_message').html(errorMessage).show();
}