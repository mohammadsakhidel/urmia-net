function fbLogin() {
    FB.login(function (loginResponse) {
        if (loginResponse.status === 'connected') {
            SubmitFbUserId(loginResponse.authResponse.userID);
        }
        else {
            show_error_dialog($('#hid_fb_connect_err_msg').val());
        }
    }, { scope: 'email' });
}

function SubmitFbUserId(userId) {
    $.ajax({
        url: "/account/facebooklogin",
        type: "POST",
        data: { UserId: userId },
        error: function () {
            show_error_dialog($('#hid_fb_connect_err_msg').val());
        },
        success: function (data) {
            if (data.Done) {
                if (data.StatusCode == 6) {
                    window.location = "/homepage";
                }
                else {
                    window.location = "/account/login?sc=" + data.StatusCode;
                }
            }
            else {
                show_error_dialog(data.Errors[0]);
            }
        }
    });
}
//*********************************** login on header:
function FailureLogin() {
    show_error_dialog($('#login #ajax_fail').val());
}

function SuccessLogin(data) {
    if (data.StatusCode != null && data.StatusCode == 6) {
        window.location = "/homepage";
    }
    else {
        var user = $('#login input#login_Email').val();
        window.location = "/account/login?sc=" + data.StatusCode + "&u=" + user;
    }
}
//*********************************** login on content page:
function BeginLogin2() {
    $('.login_on_content #status_message').hide();
}

function FailureLogin2() {
    $('.login_on_content #status_message').html($('.login_on_content #ajax_fail').val()).fadeIn('fast');
}

function SuccessLogin2(data) {
    if (data.StatusCode != null) {
        if (data.StatusCode != 6) { //login faild
            $('.login_on_content #status_message').html(data.Errors[0]).fadeIn('fast');
        }
        else {
            var redirect_path = $('#login input#redirect_path').val();
            window.location = redirect_path;
        }
    }
    else {
        // exception occured:
        $('.login_on_content #status_message').html(data.Errors[0]).fadeIn('fast');
    }
}